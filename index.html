<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MementoChem</title>
    <link
      href="./assets/bootstrap-5.3.5/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="./assets/highlightjs-11.9.0/styles/default.min.css"
    />
    <script src="./assets/highlightjs-11.9.0/highlight.min.js"></script>
    <!-- Add custom syntax highlighting -->
    <script src="./assets/highlightjs-11.9.0/languages/pyscf.js"></script>
    <script src="./assets/highlightjs-11.9.0/languages/molcas.js"></script>
    <script src="./assets/highlightjs-11.9.0/languages/psi4.js"></script>
    <script src="./assets/highlightjs-11.9.0/languages/orca.js"></script>
    <!-- Github theme -->
    <link
      rel="stylesheet"
      href="./assets/highlightjs-11.9.0/styles/custom/github_adapted.css"
    />
  </head>
  <style>
    html,
    .container-fluid {
      min-height: calc(100vh - 20px); /* Adjust based on footer height */
      padding-bottom: 20px; /* Adjust to the footer height */
      border: 1px solid #f8f9fa; /* Light border */
    }
    .fixed-footer {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      min-height: 20px;
      background-color: rgba(
        248,
        249,
        250,
        0.9
      ); /* Light background with some transparency */
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1); /* Subtle shadow for depth */
      z-index: 1030; /* Same as Bootstrap's navbar, high enough to be above most elements */
      border-top: 1px solid #dee2e6; /* Subtle separator */
    }
    #output_text {
      display: block; /* Make it a block-level element */
      padding: 10px; /* Add some padding for better spacing */
      background-color: #f1f1f1; /* Light background to contrast with light-bg */
      border: 1px solid #ccc; /* Add a subtle border */
      border-radius: 5px; /* Rounded corners */
      font-family:
        Consolas, Monaco, monospace; /* Monospace font for code appearance */
      color: #333; /* Dark text for contrast */
      overflow-x: auto; /* Allow horizontal scrolling if the content overflows */
      white-space: pre-wrap; /* Wrap long lines instead of breaking them */
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* Subtle shadow for extra contrast */
    }
    code .comment {
      color: #888; /* Grey color */
      font-style: italic;
    }
    .form-floating select {
      padding-top: 1.25rem; /* Adjust padding as necessary */
    }
    .rounded-border {
      border-radius: 5px;
    }
    .form-floating label {
      padding-left: 0.55rem; /* Adjust left padding if necessary */
    }
    /* Method specific options */
    .separator {
      border: none;
      height: 1px;
      background: #444;
      margin: 1rem 0;
    }
    /* Change the background color of the accordion buttons when collapsed */
    .accordion-button {
      background-color: #f0f0f0; /* Light grey background when collapsed */
      border: 1px solid #ddd; /* Optional: add a border to define the edges */
    }

    /* Change the background color when the accordion is active (expanded) */
    .accordion-button:not(.collapsed) {
      background-color: #007bff; /* Blue background for active state */
      color: white; /* Make the text white when active */
    }
  </style>
  <body>
    <div class="container-fluid border bg-light">
      <div class="row">
        <!-- Left Column: Form Inputs -->
        <div class="col-12 col-md-6">
          <div class="p-3 mt-3">
            <h3>General</h3>
            <form id="selectionForm">
              <!-- Row for Program and Calculation Type -->
              <div class="row mb-3">
                <div class="col">
                  <div class="form-floating">
                    <select id="qc_program" class="form-select">
                      <option value="Orca">Orca</option>
                      <option value="PySCF">PySCF</option>
                      <option value="OpenMolcas">OpenMolcas</option>
                      <option value="Psi4">Psi4</option>
                    </select>
                    <label for="qc_program">Program</label>
                  </div>
                </div>

                <div class="col">
                  <div class="form-floating">
                    <select id="calc_type" class="form-select">
                      <option value="SP">Energy</option>
                      <option value="OPT">Geometry Opt</option>
                      <option value="OPTTS">Transition State Opt</option>
                    </select>
                    <label for="calc_type">Calc Type</label>
                  </div>
                </div>

                <div class="col" id="freq_full">
                  <input
                    type="checkbox"
                    class="btn-check"
                    id="freq_toggle"
                    autocomplete="off"
                  />
                  <label
                    class="btn btn-outline-secondary h-100 d-flex align-items-center justify-content-center"
                    for="freq_toggle"
                    title="Enable frequency calculation"
                    >Freq</label
                  >
                </div>
              </div>

              <!-- Calculation Parameters Section -->
              <h4>Calculation Parameters</h4>
              <div class="row mb-3">
                <div class="col">
                  <div class="form-floating">
                    <select id="calc_param" class="form-select">
                      <option value="HF">HF</option>
                      <option value="DFT">DFT</option>
                      <option value="CASSCF">CASSCF</option>
                      <option value="CASCI">CASCI</option>
                      <option value="MP2">MP2</option>
                      <option value="CCSD">CCSD</option>
                      <option value="CCSD_T">CCSD(T)</option>
                      <!-- <option value="CCSDT">CCSDT</option> -->
                    </select>
                    <label for="calc_param">Method</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-floating">
                    <select id="basis_param" class="form-select"></select>
                    <label for="basis_param">Basis</label>
                  </div>
                </div>
                <div class="col" id="scf-type-container">
                  <div class="form-floating">
                    <select id="scf_type" class="form-select"></select>
                    <label for="scf_type">SCF Type</label>
                  </div>
                </div>
                <div
                  class="col-auto"
                  style="display: flex; flex-direction: column"
                >
                  <div class="pb-1">
                    <input
                      type="checkbox"
                      class="btn-check"
                      id="ri_toggle"
                      autocomplete="off"
                    />
                    <label
                      class="btn btn-outline-secondary"
                      for="ri_toggle"
                      title="Enable resolution of identity approx (density fitting)"
                      style="font-size: x-small"
                      >RI / DF</label
                    >
                  </div>
                  <div>
                    <input
                      type="checkbox"
                      class="btn-check"
                      id="integral_direct_toggle"
                      autocomplete="off"
                    />
                    <label
                      class="btn btn-outline-secondary"
                      for="integral_direct_toggle"
                      title="Enable integral direct algorithm (avoids storing integrals)"
                      style="font-size: x-small"
                      >Direct</label
                    >
                  </div>
                </div>
              </div>

              <!-- Method-specific options -->
              <hr class="separator" />

              <div class="row">
                <div id="dft-options" class="d-none col-auto mb-3">
                  <div class="form-floating">
                    <select id="dft_functional" class="form-select"></select>
                    <label for="dft_functional">XC Functional</label>
                  </div>
                </div>

                <div
                  id="unrestricted-options"
                  class="col d-none mb-3 align-self-end"
                >
                  <div class="row">
                    <div class="col-auto" id="guessmix_full">
                      <input
                        type="checkbox"
                        class="btn-check"
                        id="guessmix_toggle"
                        autocomplete="off"
                      />
                      <label
                        class="btn btn-outline-secondary"
                        for="guessmix_toggle"
                        title="Break alpha beta spin symmetry (otherwise, by default UHF will converge to RHF)"
                        >Mix Guess</label
                      >
                    </div>
                    <div class="col-auto" id="stability_full">
                      <input
                        type="checkbox"
                        class="btn-check"
                        id="stability_toggle"
                        autocomplete="off"
                      />
                      <label
                        class="btn btn-outline-secondary"
                        for="stability_toggle"
                        title="Restarts calculation if converged to saddle point instead of minimum"
                        >Stability Analysis</label
                      >
                    </div>
                  </div>
                </div>
              </div>

              <div id="mp2-options" class="d-none col mb-3">
                <div class="row">
                  <div class="col" id="mp2_natorb_full">
                    <input
                      type="checkbox"
                      class="btn-check"
                      id="natorb_toggle"
                      autocomplete="off"
                    />
                    <label class="btn btn-outline-secondary" for="natorb_toggle"
                      >Natural Orbitals</label
                    >
                  </div>
                </div>
              </div>
              <div id="ci-options" class="d-none col mb-3">
                <div class="row">
                  <div class="col">
                    <div class="form-floating h-100">
                      <select id="ci_excitation" class="form-select h-100">
                        <option value="SD">SD</option>
                        <option value="FCI">FCI</option>
                      </select>
                      <label for="ci_excitation">Excitation Rank</label>
                    </div>
                  </div>
                </div>
              </div>
              <div id="cc-options" class="d-none col mb-3">
                <div class="row">
                  <div class="col">
                    <div class="form-floating h-100">
                      <select id="cc_excitation" class="form-select h-100">
                        <option value="SD">SD</option>
                        <option value="SD_T">SD(T)</option>
                        <option value="SDT">SDT</option>
                      </select>
                      <label for="cc_excitation">Excitation Rank</label>
                    </div>
                  </div>
                  <div class="col d-none" id="cc_loc_corr_full">
                    <input
                      type="checkbox"
                      class="btn-check"
                      id="cc_loc_corr_toggle"
                      autocomplete="off"
                    />
                    <label
                      class="btn btn-outline-secondary h-100 d-flex align-items-center justify-content-center"
                      for="cc_loc_corr_toggle"
                      ,
                      title="Local correlations method"
                      >DLPNO</label
                    >
                  </div>
                </div>
              </div>
              <div id="casscf-options" class="row ps-2 mb-3 d-none">
                <div class="col-8">
                  <div class="row border rounded-border p-0" id="active_space">
                    <div class="col-12 d-flex justify-content-center">
                      <label>Active Space</label>
                    </div>
                    <div class="col p-1">
                      <div class="form-floating">
                        <input
                          type="number"
                          class="form-control"
                          id="active_electrons"
                          value="6"
                          min="0"
                        />
                        <label for="active_electrons"># Elec</label>
                      </div>
                    </div>
                    <div class="col p-1">
                      <div class="form-floating">
                        <input
                          type="number"
                          class="form-control"
                          id="active_orbitals"
                          value="6"
                          min="0"
                        />
                        <label for="active_orbitals"># Orbs</label>
                      </div>
                    </div>
                    <div class="col p-1">
                      <div class="form-floating">
                        <input
                          type="number"
                          class="form-control"
                          id="active_nroots"
                          value="1"
                          min="0"
                        />
                        <label for="active_nroots"># Roots</label>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-4 mb-3">
                  <div class="row">
                    <div class="col mb-1" id="casci_full">
                      <input
                        type="checkbox"
                        class="btn-check"
                        id="casci_toggle"
                        autocomplete="off"
                      />
                      <label
                        class="btn btn-outline-secondary h-100 d-flex align-items-center justify-content-center"
                        for="casci_toggle"
                        title="Do not do orbital rotations"
                        style="font-size: x-small"
                        >CASCI</label
                      >
                    </div>
                  </div>
                  <div class="col">
                    <div class="form-floating">
                      <select id="active_pt" class="form-select">
                        <option value=""></option>
                        <option value="SC_NEVPT2">SC_NEVPT2</option>
                        <option value="FIC_NEVPT2">FIC_NEVPT2</option>
                        <option value="CASPT2">CASPT2</option>
                      </select>
                      <label for="active_pt">MRPT</label>
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="accordion accordion-flush mb-3"
                id="accordian_advanced_opts"
              >
                <div class="accordion-item">
                  <h2 class="accordion-header">
                    <button
                      class="accordion-button collapsed p-1"
                      type="button"
                      data-bs-toggle="collapse"
                      data-bs-target="#flush-collapseOne"
                      aria-expanded="false"
                      aria-controls="flush-collapseOne"
                      style="border-radius: 5px"
                    >
                      Advanced Options
                    </button>
                  </h2>
                  <div
                    id="flush-collapseOne"
                    class="accordion-collapse collapse"
                    data-bs-parent="#accordionFlushExample"
                  >
                    <div class="accordion-body m-0 pb-2">
                      <div class="row align-items-center">
                        <div class="col">
                          <input
                            type="checkbox"
                            class="btn-check"
                            id="tight_conv"
                            autocomplete="off"
                          />
                          <label
                            class="btn btn-outline-secondary h-100 d-flex align-items-center justify-content-center"
                            for="tight_conv"
                            title="Use tight convergence criteria"
                            >Tight Conv</label
                          >
                        </div>
                        <div class="col">
                          <div class="form-floating h-100">
                            <select
                              id="solver_method"
                              class="form-select h-100"
                            >
                              <option value="DIIS">DIIS</option>
                              <option value="SOSCF">SOSCF</option>
                            </select>
                            <label for="solver_method">Solver</label>
                          </div>
                        </div>
                        <div class="col">
                          <div class="form-floating h-100">
                            <select
                              id="initial_guess"
                              class="form-select h-100"
                            >
                              <option value="SAD">SAD (default)</option>
                              <option value="Core">HCore</option>
                            </select>
                            <label for="initial_guess">Initial Guess</label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <h4>Molecule</h4>
              <div class="row">
                <div class="col mb-3">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control"
                      id="charge"
                      value="0"
                    />
                    <label for="charge">Charge</label>
                  </div>
                </div>
                <div class="col mb-3">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control"
                      id="multiplicity"
                      value="1"
                      min="1"
                    />
                    <label for="multiplicity">Multiplicity</label>
                  </div>
                </div>
                <div class="col mb-3" id="dist_unit_full">
                  <div class="form-floating">
                    <select id="dist_unit" class="form-select">
                      <option value="Angstrom">Angstrom</option>
                      <option value="Bohr">Bohr</option>
                    </select>
                    <label for="dist_unit">Units</label>
                  </div>
                </div>
                <div class="col" id="xyz_file_full">
                  <input
                    type="checkbox"
                    class="btn-check"
                    id="file_toggle"
                    autocomplete="off"
                  />
                  <label
                    class="btn btn-outline-secondary d-flex align-items-center justify-content-center"
                    for="file_toggle"
                    title="Use XYZ file as input instead of raw geometry"
                    >XYZ File</label
                  >
                </div>
              </div>

              <!-- XYZ Geometry Input -->
              <div id="xyz-input" class="col">
                <div class="container p-0">
                  <div class="row">
                    <div class="col-8" id="xyz_input_field">
                      <label for="xyz_geom" class="form-label"
                        >XYZ Geometry</label
                      >
                      <textarea
                        id="xyz_geom"
                        class="form-control"
                        rows="6"
                      ></textarea>
                    </div>
                    <div
                      class="col-4 d-flex align-items-center justify-content-center"
                    >
                      <img
                        src="./assets/mementochem-logo.png"
                        alt="MementoChem Logo"
                        style="height: 150px"
                      />
                    </div>
                  </div>
                  <div class="row">
                    <div class="col d-none" id="xyz_file_field">
                      <div class="input-group mt-3">
                        <span class="input-group-text" id="basic-addon1"
                          >XYZ File</span
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="xyz_file_name"
                          value="geom.xyz"
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>

        <!-- Right Column: Display Area -->
        <div class="col-12 col-md-6">
          <div class="p-3 mt-3">
            <h3>Generated Input File</h3>
            <div class="code-container position-relative">
              <button
                class="copy-btn btn btn-sm btn-outline-secondary position-absolute top-0 end-0 m-2"
              >
                Copy
              </button>
              <pre><code id="output_text" class="language-python"></code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer class="fixed-footer">
      <div class="container">
        <div class="row">
          <div class="col text-start">
            <p class="mb-0">
              <i>MementoChem</i>: The Input Generator for Forgetful Chemists ðŸ¤“
            </p>
          </div>
          <div class="col text-end">
            <p class="mb-0">
              <small class="text-muted"
                >Â© 2025 | Created by Kalman Szenes</small
              >
            </p>
          </div>
        </div>
      </div>
    </footer>

    <!-- NOTE:  Needed for accordian -->
    <script src="./assets/bootstrap-5.3.5/js/bootstrap.min.js"></script>

    <!-- JavaScript to update the text area -->
    <script type="module" src="./main.js"></script>
  </body>
</html>
